//- * * * * * * * *
//- * * Layout  * *
//- * * * * * * * *

//- The page layout is set using the Pug `extends` directive with a path to a layout template
//- All of the layout options are contained in src/pug/layouts
extends ../../../layouts/dashboard.pug

//- * * * * * * * *
//- * * Config  * *
//- * * * * * * * *

//- These are page-level configuration options that should be set for each page
block config
    - var navPosition = 'nav-fixed'
    - var pageTitle = task.TITLE

//- Add CSS for third party plugins used on this page
append css
    //- Load dataTables CSS via CDN
    link(href='https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css', rel='stylesheet', crossorigin='anonymous')

//- * * * * * * * *
//- * * Topnav  * *
//- * * * * * * * *

//- Define the `block topnav` from the layout
block topnav

    //- Bring in the sidenav mixin and configure
    //- For all available config options for this mixin, visit https://docs.startbootstrap.com/sb-admin-pro/
    include ../../mixins/topnav.pug
    +topnav({
        topnavStyle: 'navbar-light bg-white'
    })

//- * * * * * * * *
//- * * Sidenav * *
//- * * * * * * * *

//- Define the `block sidenav` from the layout
//- Note: The chosen page layout must have a `block sidenav` or no sidenav will appear
block sidenav

    //- Bring in the sidenav mixin and configure
    //- For all available config options for this mixin, visit https://docs.startbootstrap.com/sb-admin-pro/
    include ../../mixins/sidenav-proj.pug
    +sidenav({
        sidenavStyle: 'sidenav-dark',
        user: user.NAME,
        pid: pid
    })

//- * * * * * * * * * * *
//- * * Page Content  * *
//- * * * * * * * * * * *

//- Define the main `block content` from the layout
block content

    //- Bring in the page header mixin and configure
    //- For all available config options for this mixin, visit https://docs.startbootstrap.com/sb-admin-pro/
    include ../../mixins/headers/header-breadcrumb.pug
    +header({
        pageHeaderStyle: 'page-header-dark',
        pageHeaderBg: 'bg-gradient-primary-to-secondary',
        pageHeaderSpacing: 'pb-10',
        pageHeaderContainer: 'container',
        pageSubtitle: 'Example dashboard overview and content summary',
        pageIcon: 'activity',
        isTask: true,
        pid: pid,
        job: job
    })

        button.btn.btn-light.btn-sm(type='button', data-toggle='modal', data-target='#createActivity') 새로운 activity 등록

    // Main page content
    .container.mt-n10
        .row
            .col-xxl-12.col-xl-8.mb-6
                .card.card-scrollable
                    .card-header Post
                    .card-body
                        if posts.length != 0
                            each post in posts
                                a.card.card-icon.lift.lift-sm.mb-4(href='#!')
                                    .card-body
                                        .d-flex.align-items-center.justify-content-between
                                            .h5.card-title.mb-0 #{post.TITLE}
                                            i.flex-shrink-0.ml-4(data-feather='chevron-right')
                        else
                            p 등록된 Post가 없습니다.
                    a.card-footer.small.text-muted(href='#!') post 추가하기 


        .card.mb-4.card-scrollable
            .card-header activity 기록
            .card-body
                if acts.length != 0
                    each act in acts
                        a.card.card-icon.lift.lift-sm.mb-4(data-toggle="modal", href='#Activity'+act.ID)
                            .card-body
                                .d-flex.align-items-center.justify-content-between
                                    .h5.card-title.mb-0 #{act.TITLE}
                                    i.flex-shrink-0.ml-4(data-feather='chevron-right')
                else
                    p No activity

    // CREATE activity modal
    #createActivity.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalScrollableTitle', aria-hidden='true')
        .modal-dialog.modal-dialog-scrollable(role='document')
            .modal-content
                form(method="POST")
                    .modal-header
                        h5#exampleModalScrollableTitle.modal-title Modal title
                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                            span(aria-hidden='true') ×
                    .modal-body
                        hr.mt-0.mb-4
                        .row
                            .col-lg-8
                                .card.mb-4
                                    .card-header 기본 정보
                                    .card-body
                                        .form-group.col-md-6
                                            label(for='actTitle').small.mb-1 제목
                                            input#jobTitle.form-control(type='text', name='title', placeholder='업무명을 입력하세요')
                                        .form-group.col-md-6
                                            label(for='actDetail').small.mb-1 내용
                                            input#jobDesc.form-control(type='text', name='desc', placeholder='')
                                .card.mb-4
                                    .card-header 상세
                                    .card-body
                                        h5.card-title 기간 설정
                                            .form-row
                                                .form-group.col-md-6                                
                                                    label.small.mb-1(for='start_date') 시작 날짜
                                                    input#inputStartdate.form-contorl(type='date', name='start_date')
                                            .form-row
                                                .form-group.col-md-6
                                                    label.small.mb-1(for='end_date') 종료 날짜
                                                    input#inputEnddate.form-contorl(type='date', name='end_date')
                    .modal-footer
                        button.btn.btn-secondary(type='button', data-dismiss='modal') Close
                        button.btn.btn-primary(type='submit') 생성하기

    // Activity Read modal
    if acts.length != 0
        each act in acts
            .modal.fade(id='Activity'+act.ID, tabindex='-1', role='dialog', aria-labelledby='exampleModalScrollableTitle', aria-hidden='true')
                .modal-dialog.modal-lg.modal-dialog-scrollable.modal-dialog-centered(role='document')
                    .modal-content
                        .modal-header
                            h5#exampleModalScrollableTitle.modal-title #{act.TITLE}
                            button.close(type='button', data-dismiss='modal', aria-label='Close')
                                span(aria-hidden='true') ×
                        .modal-body
                            hr.mt-0.mb-4
                            
                        .modal-footer
                            button.btn.btn-secondary(type='button', data-dismiss='modal') Close
                            button.btn.btn-primary(type='button') 확인         
//- * * * * * * * *
//- * * Footer  * *
//- * * * * * * * *

//- Define the `block footer` from the layout
block footer

    //- Bring in the footer mixin and configure
    //- For all available config options for this mixin, visit https://docs.startbootstrap.co/sb-admin-pro/
    include ../../mixins/footer.pug
    +footer({
        footerStyle: 'footer-light'
    })

append scripts
    //- Load dataTables via CDN
    script(src='https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js', crossorigin='anonymous')
    script(src='https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js', crossorigin='anonymous')
    //- Load dataTables demo data
    script(src='/assets/demo/datatables-demo.js')
